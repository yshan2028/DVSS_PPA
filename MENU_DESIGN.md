# DVSS-PPA 系统功能菜单设计

## 1. Python 后端功能模块

### 1.1 认证模块 (Auth)
- 用户登录/登出
- Token 刷新
- 用户信息获取
- 密码修改

### 1.2 用户管理模块 (User Management)
- 用户 CRUD 操作
- 用户状态管理
- 密码重置
- 角色分配

### 1.3 角色管理模块 (Role Management)
- 角色 CRUD 操作
- 字段权限配置
- 权限矩阵管理

### 1.4 字段管理模块 (Field Management)
- 订单字段定义
- 敏感度等级配置
- 分值权重设置
- 字段分类管理

### 1.5 订单管理模块 (Order Management)
- 原始订单 CRUD
- 批量数据导入
- 敏感度分析
- 订单加密处理

### 1.6 分片管理模块 (Shard Management)
- 分片信息管理
- 存储节点管理
- 完整性验证
- 数据重构

### 1.7 日志管理模块 (Log Management)
- 操作日志查询
- 日志统计分析
- 日志导出功能

## 2. Go 后端功能模块

### 2.1 加密日志模块 (Encryption Log)
- 记录加密操作到区块链
- 查询加密日志
- 加密操作统计

### 2.2 解密日志模块 (Decryption Log)
- 记录解密操作到区块链
- 查询解密日志
- 解密权限审计

### 2.3 查询日志模块 (Query Log)
- 记录查询操作到区块链
- 查询行为追踪
- 数据访问审计

### 2.4 审计统计模块 (Audit Statistics)
- 操作统计分析
- 审计报告生成
- 时间线分析

## 3. Vue 前端页面结构

### 3.1 前台页面 (Public Pages)

#### 3.1.1 首页 (/)
- 系统介绍
- 功能说明
- 使用指南

#### 3.1.2 数据加密页面 (/encrypt)
- 手动输入数据加密
- 文件上传加密
- 批量数据处理
- 加密结果下载

#### 3.1.3 用户登录页面 (/login)
- 用户名/邮箱登录
- 密码认证
- 记住登录状态

#### 3.1.4 数据查询页面 (/query) [需登录]
- 按权限显示字段
- 高级搜索功能
- 数据解密查看
- 敏感字段遮罩

### 3.2 后台管理页面 (Admin Pages)

#### 3.2.1 仪表盘 (/admin/dashboard)
- 系统概览统计
- 最近操作日志
- 系统监控图表
- 快捷操作入口

#### 3.2.2 用户管理 (/admin/users)
- 用户列表页面
  - 用户信息展示
  - 搜索过滤功能
  - 批量操作
- 用户表单页面
  - 新建/编辑用户
  - 角色分配
  - 状态设置
- 用户详情页面
  - 基本信息
  - 操作历史
  - 权限详情

#### 3.2.3 角色管理 (/admin/roles)
- 角色列表页面
  - 角色信息展示
  - 权限概览
- 角色表单页面
  - 新建/编辑角色
  - 基本信息设置
- 权限配置页面
  - 字段权限矩阵
  - 查看/解密权限
  - 批量权限设置

#### 3.2.4 字段管理 (/admin/fields)
- 字段列表页面
  - 字段信息展示
  - 敏感度等级
  - 分类管理
- 字段表单页面
  - 新建/编辑字段
  - 敏感度配置
  - 分值设置
- 敏感度配置页面
  - 全局敏感度设置
  - 配置导入/导出
  - 批量更新

#### 3.2.5 订单管理 (/admin/orders)
- 订单列表页面
  - 订单信息展示（按权限）
  - 高级搜索过滤
  - 状态管理
- 订单详情页面
  - 完整订单信息
  - 敏感度分析结果
  - 加密状态
- 订单上传页面
  - 文件上传界面
  - 批量导入功能
  - 数据预览
- 加密管理页面
  - 批量加密操作
  - 加密进度监控
  - 结果统计

#### 3.2.6 分片管理 (/admin/shards)
- 分片列表页面
  - 分片信息展示
  - 存储状态
  - 完整性状态
- 分片详情页面
  - 分片具体信息
  - 存储节点信息
  - 校验信息
- 节点管理页面
  - 存储节点列表
  - 节点状态监控
  - 容量管理
- 数据重构页面
  - 重构操作界面
  - 分片选择
  - 重构结果

#### 3.2.7 日志管理 (/admin/logs)
- 操作日志页面
  - 系统操作日志
  - 用户行为追踪
  - 时间范围查询
- 加密日志页面
  - 从区块链获取加密日志
  - 加密操作统计
  - 时间线展示
- 解密日志页面
  - 从区块链获取解密日志
  - 解密权限审计
  - 访问行为分析
- 查询日志页面
  - 从区块链获取查询日志
  - 查询行为统计
  - 数据访问分析
- 审计报告页面
  - 综合审计报告
  - 统计图表
  - 报告导出

## 4. 页面权限控制

### 4.1 前台页面权限
- 首页：所有人可访问
- 加密页面：所有人可访问
- 登录页面：所有人可访问
- 查询页面：需要登录，按角色权限显示字段

### 4.2 后台页面权限
- 仪表盘：所有登录用户可访问
- 用户管理：管理员权限
- 角色管理：管理员权限
- 字段管理：管理员权限
- 订单管理：按角色权限控制字段显示
- 分片管理：管理员权限
- 日志管理：管理员权限

## 5. 菜单结构设计

### 5.1 前台导航菜单
```
├── 首页
├── 数据加密
├── 用户登录
└── 数据查询 [登录后显示]
```

### 5.2 后台管理菜单
```
├── 仪表盘
├── 系统管理
│   ├── 用户管理
│   ├── 角色管理
│   └── 字段管理
├── 数据管理
│   ├── 订单管理
│   └── 分片管理
└── 审计管理
    ├── 操作日志
    ├── 加密日志
    ├── 解密日志
    ├── 查询日志
    └── 审计报告
```

## 6. 关键功能描述

### 6.1 角色权限机制
- 每个角色可配置对不同订单字段的查看权限
- 字段权限分为：可查看、可解密
- 前端根据用户角色动态显示/隐藏字段
- 敏感字段在无权限时显示遮罩

### 6.2 敏感度分析
- 基于 sensitivity.yaml 配置计算订单敏感度
- 支持字段级别的敏感度配置
- 动态计算整体订单敏感度分值
- 根据敏感度等级进行不同处理

### 6.3 分片管理
- 支持动态 k 值分片
- 多节点分布式存储
- 完整性验证机制
- 数据重构功能

### 6.4 审计追踪
- 所有关键操作记录到区块链
- 操作日志不可篡改
- 完整的审计链路
- 多维度统计分析

## 7. 技术架构对应

### 7.1 Python 后端职责
- 业务逻辑处理
- 数据库操作
- 权限验证
- 加密分片算法
- API 接口提供

### 7.2 Go 后端职责
- Fabric 区块链操作
- 审计日志上链
- 链上数据查询
- 区块链事件监听

### 7.3 Vue 前端职责
- 用户界面展示
- 权限控制实现
- 数据可视化
- 用户交互处理

这个功能菜单设计确保了：
1. 功能模块清晰分离
2. 权限控制细粒度
3. 用户体验友好
4. 安全审计完整
5. 技术架构合理
